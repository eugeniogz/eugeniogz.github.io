---
layout: null
permalink: /search.json
---
{% assign all_items = site.pages | concat: site.posts %}
{% assign filtered_items = all_items | where_exp: "item", "item.title and item.layout != 'null' and item.layout != nil" %}
[
  {% for item in filtered_items %}
    {
      "title"    : "{{ item.title | escape | strip_newlines }}",
      "url"      : "{{ item.url | relative_url }}",
      "content"  : {{ item.content | strip_html | strip_newlines | jsonify }},
      {% if item.date %}
      "type"     : "post"
      {% else %}
      "type"     : "page"
      {% endif %}
    }
    {% unless forloop.last %},{% endunless %}
  {% endfor %}
]