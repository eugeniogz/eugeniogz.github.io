---
layout: null
permalink: /search.json
---
{%- assign all_content = site.pages | concat: site.posts -%}
{%- assign items_with_layout = all_content | where: "layout", "default" -%}
{%- assign filtered_items = items_with_layout | where_exp: "item", "item.name != 'index.md'" -%}
[
  {%- for item in filtered_items -%}
    {
      "title"    : "{{ item.title | escape | strip_newlines }}",
      "url"      : "{{ item.url | relative_url }}",
      "content"  : {{ item.content | strip_html | strip_newlines | jsonify }},
      {% if item.date %}
      "type"     : "post"
      {% else %}
      "type"     : "page"
      {% endif %}
    }
    {%- unless forloop.last -%},{%- endunless -%}
  {%- endfor -%}
]