---
layout: null
permalink: /search.json
---
{%- assign all_content = site.pages | concat: site.posts -%}
{%- assign items_with_layout = all_content | where: "layout", "default" -%}
{%- assign searchable_items = items_with_layout | where_exp: "item", "item.search != false" -%}
{%- assign no_index = searchable_items | where_exp: "item", "item.name != 'index.md'" -%}
{%- assign filtered_items = no_index | where_exp: "item", "item.name != '404.html'" -%}
[
  {%- for item in filtered_items -%}
    {
      "title"    : {{ item.title | jsonify }},
      "url"      : {{ item.url | relative_url | jsonify }},
      "content"  : {{ item.content | strip_html | strip_newlines | jsonify }},
      "reading_time"  : "{{ item.reading_time | default: 0 }}",
      {% if item.date %}
      "type"     : "post"
      {% else %}
      "type"     : "page"
      {% endif %}
    }
    {%- unless forloop.last -%},{%- endunless -%}
  {%- endfor -%}
]